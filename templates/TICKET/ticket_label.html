<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="utf-8">
    <link href="label.css" media="print" rel="stylesheet">
    <title>√âtiquette {{ ticket.order_number }}</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        @page {
            size: 100mm 150mm;
            margin: 3mm;
        }
        body {
            font-family: Arial, Helvetica, sans-serif;
            font-size: 9pt;
            color: #000;
            width: 94mm;
            height: 144mm;
            padding: 2mm;
        }
        .sender {
            font-size: 7pt;
            color: #666;
            margin-bottom: 3mm;
            line-height: 1.2;
        }
        .sender strong {
            color: #000;
        }
        .recipient {
            border: 2px solid #000;
            padding: 3mm;
            margin: 3mm 0;
            min-height: 40mm;
        }
        .recipient-name {
            font-size: 14pt;
            font-weight: bold;
            margin-bottom: 2mm;
            text-transform: uppercase;
        }
        .recipient-city {
            font-size: 18pt;
            font-weight: bold;
            margin-top: 2mm;
            text-transform: uppercase;
        }
        .info-section {
            border-top: 1px dashed #999;
            padding-top: 2mm;
            margin-top: 2mm;
            font-size: 8pt;
        }
        .info-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 1mm;
        }
        .icons {
            display: flex;
            gap: 5mm;
            margin: 3mm 0;
            flex-wrap: wrap;
        }
        .icon-badge {
            padding: 2mm 3mm;
            border-radius: 2mm;
            font-size: 7pt;
            font-weight: bold;
            display: inline-block;
        }
        .fragile {
            background: #fee;
            color: #c00;
            border: 1px solid #c00;
        }
        .insured {
            background: #fef3c7;
            color: #92400e;
            border: 1px solid #f59e0b;
        }
        .signature {
            background: #dbeafe;
            color: #1e40af;
            border: 1px solid #3b82f6;
        }
        .tracking {
            text-align: center;
            margin: 3mm 0;
            font-size: 10pt;
            font-weight: bold;
            font-family: monospace;
        }
        .carrier {
            text-align: center;
            font-size: 11pt;
            font-weight: bold;
            margin: 2mm 0;
            text-transform: uppercase;
        }
        .items-list {
            font-size: 7pt;
            margin-top: 2mm;
            border-top: 1px solid #ccc;
            padding-top: 2mm;
        }
        .items-list table {
            width: 100%;
            border-collapse: collapse;
        }
        .items-list td {
            padding: 1mm;
        }
    </style>
</head>
<body>
    <!-- Exp√©diteur -->
    <div class="sender">
        <strong>Exp√©diteur:</strong><br>
        {{ ticket.sender_name }}<br>
        {{ ticket.sender_address|linebreaks }}<br>
        {{ ticket.sender_city }}<br>
        {% if ticket.sender_phone %}‚òé {{ ticket.sender_phone }}{% endif %}
    </div>

    <!-- Destinataire -->
    <div class="recipient">
        <div class="recipient-name">{{ ticket.recipient_name }}</div>
        <div style="margin: 2mm 0; line-height: 1.3;">
            {{ ticket.recipient_address|linebreaks }}
        </div>
        <div class="recipient-city">{{ ticket.recipient_city }}</div>
        {% if ticket.recipient_phone %}
        <div style="margin-top: 2mm; font-size: 10pt;">
            ‚òé {{ ticket.recipient_phone }}
        </div>
        {% endif %}
        {% if ticket.recipient_instructions %}
        <div style="margin-top: 2mm; font-size: 7pt; font-style: italic; color: #555;">
            ‚Ñπ {{ ticket.recipient_instructions }}
        </div>
        {% endif %}
    </div>

    <!-- Transporteur -->
    <div class="carrier">
        {{ ticket.get_carrier_display_name }}
    </div>

    <!-- Num√©ro de suivi -->
    {% if ticket.tracking_number %}
    <div class="tracking">
        {{ ticket.tracking_number }}
    </div>
    {% endif %}

    <!-- Informations du colis -->
    <div class="info-section">
        <div class="info-row">
            <span><strong>Commande:</strong> {{ ticket.order_number }}</span>
            <span><strong>Date:</strong> {{ ticket.shipping_date|date:"d/m/Y" }}</span>
        </div>
        <div class="info-row">
            <span><strong>Poids:</strong> {{ ticket.weight }} kg</span>
            <span><strong>Dim:</strong> {{ ticket.length }}√ó{{ ticket.width }}√ó{{ ticket.height }} cm</span>
        </div>
        {% if total_value %}
        <div class="info-row">
            <span><strong>Valeur d√©clar√©e:</strong> {{ total_value|floatformat:2 }} ‚Ç¨</span>
        </div>
        {% endif %}
    </div>

    <!-- Pictogrammes -->
    <div class="icons">
        {% if ticket.is_fragile %}
        <span class="icon-badge fragile">üî¥ FRAGILE</span>
        {% endif %}
        {% if ticket.is_insured %}
        <span class="icon-badge insured">
            üì¶ ASSUR√â {% if ticket.insurance_amount %}({{ ticket.insurance_amount }} ‚Ç¨){% endif %}
        </span>
        {% endif %}
        {% if ticket.signature_required %}
        <span class="icon-badge signature">‚úçÔ∏è SIGNATURE</span>
        {% endif %}
        {% if ticket.cash_on_delivery %}
        <span class="icon-badge insured">
            üí∂ CR: {{ ticket.cash_on_delivery }} ‚Ç¨
        </span>
        {% endif %}
    </div>

    <!-- Message au destinataire -->
    {% if ticket.recipient_message %}
    <div style="text-align: center; margin: 2mm 0; font-size: 8pt; font-style: italic; color: #555;">
        üí¨ {{ ticket.recipient_message }}
    </div>
    {% endif %}

    <!-- Liste des articles -->
    {% if items %}
    <div class="items-list">
        <strong>Contenu du colis:</strong>
        <table>
            {% for item in items %}
            <tr>
                <td>{{ item.quantity }}√ó</td>
                <td>{{ item.description }}</td>
                <td style="text-align: right;">{{ item.value }} ‚Ç¨</td>
            </tr>
            {% endfor %}
        </table>
    </div>
    {% endif %}
</body>
</html>

